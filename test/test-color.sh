#!/bin/bash
# 24-bit RGBカラー（Truecolor）テストスクリプト

echo "======================================"
echo "セクション1: 256 color テスト"
echo "======================================"
echo ""

# テスト1: 256色パレット全色表示
echo "1. 256色パレット全色表示"
# 16色（システムカラー）: 0-15
for i in {0..15}; do
    echo -ne "\033[38;5;${i}m█\033[0m"
done
echo ""
# 216色（6x6x6 RGBキューブ）: 16-231
for row in {0..5}; do
    for col in {0..35}; do
        i=$((16 + row * 36 + col))
        echo -ne "\033[38;5;${i}m█\033[0m"
    done
    echo ""
done
# 24色（グレースケール）: 232-255
for i in {232..255}; do
    echo -ne "\033[38;5;${i}m█\033[0m"
done
echo ""
echo "期待される表示:"
echo "  1行目: システムカラー16色（0-15）"
echo "  2-7行目: 6x6x6 RGBキューブ216色（16-231）各行36色"
echo "  8行目: グレースケール24色（232-255）"
echo ""

# テスト2: 基本的な前景色
echo "2. 基本的な前景色"
echo -e "\033[38;2;255;0;0m赤\033[0m          <- 期待: #FF0000"
echo -e "\033[38;2;0;255;0m緑\033[0m          <- 期待: #00FF00"
echo -e "\033[38;2;0;0;255m青\033[0m          <- 期待: #0000FF"
echo -e "\033[38;2;255;255;0m黄\033[0m          <- 期待: #FFFF00"
echo -e "\033[38;2;255;0;255mマゼンタ\033[0m      <- 期待: #FF00FF"
echo -e "\033[38;2;0;255;255mシアン\033[0m        <- 期待: #00FFFF"
echo ""

# テスト3: 基本的な背景色
echo "3. 基本的な背景色"
echo -e "\033[48;2;255;0;0m 赤背景 \033[0m    <- 期待: 背景 #FF0000"
echo -e "\033[48;2;0;255;0m 緑背景 \033[0m    <- 期待: 背景 #00FF00"
echo -e "\033[48;2;0;0;255m 青背景 \033[0m    <- 期待: 背景 #0000FF"
echo ""

# テスト4: 前景色と背景色の組み合わせ
echo "4. 前景色と背景色の組み合わせ"
echo -e "\033[38;2;255;255;255m\033[48;2;255;0;0m 白文字/赤背景 \033[0m       <- 期待: 文字 #FFFFFF / 背景 #FF0000"
echo -e "\033[38;2;255;255;0m\033[48;2;0;0;128m 黄色文字/紺背景 \033[0m     <- 期待: 文字 #FFFF00 / 背景 #000080"
echo -e "\033[38;2;255;192;203m\033[48;2;75;0;130m ピンク文字/インディゴ背景 \033[0m <- 期待: 文字 #FFC0CB / 背景 #4B0082"
echo ""

echo "======================================"
echo "セクション2: Truecolor テスト"
echo "======================================"
echo ""

# テスト5: 赤→青グラデーション
echo "5. 赤→青グラデーション（前景色）"
for i in {0..50}; do
    r=$((255 - i * 5))
    b=$((i * 5))
    if [ $r -lt 0 ]; then r=0; fi
    if [ $b -gt 255 ]; then b=255; fi
    echo -ne "\033[38;2;${r};0;${b}m█\033[0m"
done
echo ""
echo "期待される表示:"
echo "  赤 #FF0000 -> 紫 #800080 -> 青 #0000FF（51段階）"
echo "  256色モード: 階段状"
echo "  Truecolorモード: 滑らか"
echo ""

# テスト6: 緑→赤グラデーション
echo "6. 緑→赤グラデーション（背景色）"
for i in {0..50}; do
    r=$((i * 5))
    g=$((255 - i * 5))
    if [ $r -gt 255 ]; then r=255; fi
    if [ $g -lt 0 ]; then g=0; fi
    echo -ne "\033[48;2;${r};${g};0m \033[0m"
done
echo ""
echo "期待される表示:"
echo "  緑 #00FF00 -> 黄 #FFFF00 -> 赤 #FF0000（51段階、背景）"
echo "  256色モード: 階段状"
echo "  Truecolorモード: 滑らか"
echo ""

# テスト7: 微細な色の違い
echo "7. 微細な色の違い（Truecolor専用）"
echo "赤成分 #C86464 -> #FF6464:"
for i in {200..255}; do
    echo -ne "\033[48;2;${i};100;100m \033[0m"
done
echo ""
echo "緑成分 #64C864 -> #64FF64:"
for i in {200..255}; do
    echo -ne "\033[48;2;100;${i};100m \033[0m"
done
echo ""
echo "青成分 #6464C8 -> #6464FF:"
for i in {200..255}; do
    echo -ne "\033[48;2;100;100;${i}m \033[0m"
done
echo ""
echo "期待される表示:"
echo "  各行が薄い色 -> 濃い色へ変化（56段階）"
echo "  256色モード: 階段状（同じ色が連続）"
echo "  Truecolorモード: 滑らか（1段階ずつ変化が視認可能）"
echo ""

# 完了
echo "======================================"
echo "テスト完了！"
echo "======================================"
echo ""
echo "使用方法："
echo "  256色モード:"
echo "    ./koteiterm"
echo ""
echo "  Truecolorモード:"
echo "    ./koteiterm --truecolor"
echo ""
